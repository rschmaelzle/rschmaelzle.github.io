<!-- 1. Load jQuery (REQUIRED for sorting to work) -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<!-- 2. The Data Source -->
<bibtex src="{{ .Get "src" }}"></bibtex>

<!-- 3. The Search Bar (Hidden, but keeps the script happy) -->
<div id="bibtex_inputs" style="display:none;">
  <input type="text" class="search_input" placeholder="Search...">
  <select class="bibtex_search_info"><option value="year" selected="selected">Year</option></select>
</div>

<!-- 4. The Structure (Sorted by Year) -->
<div class="bibtex_structure">
  <div class="group year" sort="desc" style="margin-bottom: 30px;">
    
    <!-- The Year Header -->
    <div style="font-size: 1.5rem; font-weight: 800; border-bottom: 1px solid #ddd; margin-bottom: 15px; padding-top: 10px; color: var(--primary);">
        <i class="fas fa-calendar-alt"></i> 
    </div>
    
    <!-- The Papers -->
    <div class="templates"></div>
  
  </div>
</div>

<!-- 5. The Output Template -->
<div id="bibtex_display">
    <div class="bibtex_template" style="display: none;">
        
        <!-- Clean Academic Style (No Black Lines) -->
        <div style="margin-bottom: 15px; padding-left: 0;">
            <div style="font-size: 1rem; line-height: 1.5;">
                
                <!-- Citation -->
                <span class="author" style="font-weight: 600;"></span> 
                (<span class="year"></span>). 
                <span class="title" style="font-style: italic;"></span>. 
                <span class="journal"></span> <span class="booktitle"></span>.
                
                <!-- Links -->
                <span style="font-size: 0.8rem; font-weight: bold; margin-left: 8px;">
                    <span class="if url"> [<a class="url" href="#" target="_blank" style="text-decoration: none;">LINK</a>] </span>
                    <span class="if pdf"> [<a class="pdf" href="#" target="_blank" style="text-decoration: none;">PDF</a>] </span>
                    <span class="if doi"> [<a class="doi" href="#" target="_blank" style="text-decoration: none;">DOI</a>] </span>
                    <span class="if code"> [<a class="code" href="#" target="_blank" style="text-decoration: none;">CODE</a>] </span>
                </span>

            </div>
        </div>

    </div>
</div>

<!-- 6. Load the Bibtex Script -->
<script src="https://cdn.jsdelivr.net/gh/pcooksey/bibtex-js@1.0.0/src/bibtex_js.js"></script>

<!-- 7. CSS to Ensure Visibility -->
<style>
    #bibtex_display, .bibtex_structure {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }
    .bibtex_template { display: none; }
</style>