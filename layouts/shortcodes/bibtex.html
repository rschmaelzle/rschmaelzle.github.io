<!-- Container for the Bibliography -->
<div id="bibtex_container" style="display: block !important; min-height: 200px;">
    
    <!-- 1. The Hidden Data Source -->
    <bibtex src="{{ .Get "src" }}"></bibtex>

    <!-- 2. The Search Bar (Optional - helps keep the JS alive) -->
    <div class="bibtex_search_container" style="margin-bottom: 20px; display:none;">
        <input type="text" class="search_input" placeholder="Search references...">
    </div>

    <!-- 3. The Output Template -->
    <div id="bibtex_display">
        <div class="bibtex_template" style="display: none;">
            <li style="margin-bottom: 10px; line-height: 1.5;">
                <span class="author" style="font-weight: bold;"></span> 
                (<span class="year"></span>). 
                <span class="title" style="font-style: italic;"></span>. 
                <span class="journal"></span>
                <span class="booktitle"></span>.
                
                <!-- Conditional Links -->
                <span class="if url"> [<a class="url" href="#" target="_blank">LINK</a>] </span>
                <span class="if pdf"> [<a class="pdf" href="#" target="_blank">PDF</a>] </span>
                <span class="if doi"> [<a class="doi" href="#" target="_blank">DOI</a>] </span>
            </li>
        </div>
    </div>

</div>

<!-- 4. Load the Script at the end -->
<script src="https://cdn.jsdelivr.net/gh/pcooksey/bibtex-js@1.0.0/src/bibtex_js.js"></script>

<style>
    /* Force visibility overrides */
    #bibtex_display, #bibtex_container {
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
    }
    /* Ensure the template itself isn't hidden by the library logic improperly */
    #bibtex_display li {
        list-style-type: none;
    }
</style>