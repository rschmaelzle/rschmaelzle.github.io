<!-- 1. The Data Source -->
<bibtex src="{{ .Get "src" }}"></bibtex>

<!-- 2. THE SEARCH BAR (Required for the script to run, but hidden) -->
<div id="bibtex_inputs" style="display: none;">
  <input type="text" class="search_input" placeholder="Search...">
  <select class="bibtex_search_info"><option value="year" selected="selected">Year</option></select>
</div>

<!-- 3. THE STRUCTURE (Forces Year Sorting 2025 -> 2024) -->
<div class="bibtex_structure">
  <div class="group year" sort="desc" style="margin-bottom: 40px;">
    
    <!-- The Year Header -->
    <h3 style="border-bottom: 2px solid #ddd; margin-bottom: 20px; color: var(--primary);">
        <i class="fas fa-calendar-alt"></i> 
        <!-- JS puts year here -->
    </h3>
    
    <!-- The Papers land here -->
    <div class="templates"></div>
  
  </div>
</div>

<!-- 4. THE TEMPLATE (How one paper looks) -->
<div id="bibtex_display">
    <div class="bibtex_template" style="display: none;">
        <div style="margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px dashed #eee;">
            
            <div style="font-size: 1.1rem; font-weight: bold; margin-bottom: 5px;">
                <span class="title"></span>
            </div>
            
            <div style="font-size: 1rem; color: #444;">
                <span class="author"></span>
            </div>
            
            <div style="font-style: italic; color: #666; margin-bottom: 8px;">
                <span class="journal"></span> <span class="booktitle"></span>
            </div>

            <!-- Links -->
            <div style="font-size: 0.85rem; font-weight: bold;">
                <span class="if url" style="margin-right: 10px;"> 
                    [<a class="url" href="#" target="_blank">LINK</a>] 
                </span>
                <span class="if pdf" style="margin-right: 10px;"> 
                    [<a class="pdf" href="#" target="_blank">PDF</a>] 
                </span>
                <span class="if doi" style="margin-right: 10px;"> 
                    [<a class="doi" href="#" target="_blank">DOI</a>] 
                </span>
            </div>

        </div>
    </div>
</div>

<!-- 5. Load the Script -->
<script src="https://cdn.jsdelivr.net/gh/pcooksey/bibtex-js@1.0.0/src/bibtex_js.js"></script>

<!-- 6. Force Visibility -->
<style>
    /* Ensure the structure is visible */
    .bibtex_structure {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }
    /* Keep the template hidden until cloned */
    .bibtex_template { display: none; }
</style>